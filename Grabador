local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/luis32405516-cmyk/PREMIUM/refs/heads/main/Yy"))()
local Window = Library:CreateWindow()

local LP = game:GetService("Players").LocalPlayer
local RS = game:GetService("RunService")
local VIM = game:GetService("VirtualInputManager")
local UIS = game:GetService("UserInputService")

local history = {}
local isRecording = false
local isPlaying = false

local MacroTab = Window:CreateTab("ü§ñ MACRO FIX")

MacroTab:CreateSwitch("GRABAR ACCIONES üî¥", function(s)
    isRecording = s
    if s then
        history = {}
        local startTime = tick()
        
        -- Hilo para grabar movimiento
        task.spawn(function()
            while isRecording do
                if LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") then
                    table.insert(history, {
                        type = "move",
                        cf = LP.Character.HumanoidRootPart.CFrame,
                        t = tick() - startTime
                    })
                end
                task.wait(0.05)
            end
        end)

        -- Captura de clics reales en pantalla
        local connection
        connection = UIS.InputBegan:Connect(function(input, gpe)
            if isRecording and input.UserInputType == Enum.UserInputType.MouseButton1 then
                local pos = input.Position
                table.insert(history, {
                    type = "click",
                    x = pos.X,
                    y = pos.Y,
                    t = tick() - startTime
                })
            end
            if not isRecording then connection:Disconnect() end
        end)
    end
end)

MacroTab:CreateSwitch("REPETIR TODO üîÅ", function(s)
    isPlaying = s
    task.spawn(function()
        while isPlaying do
            local startPlayTime = tick()
            for _, data in ipairs(history) do
                if not isPlaying then break end
                
                -- Sincronizaci√≥n de tiempo
                repeat RS.Heartbeat:Wait() until (tick() - startPlayTime) >= data.t or not isPlaying
                
                if data.type == "move" and LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") then
                    LP.Character.HumanoidRootPart.CFrame = data.cf
                elseif data.type == "click" then
                    -- Simula el clic f√≠sico en la pantalla
                    VIM:SendMouseButtonEvent(data.x, data.y, 0, true, game, 1)
                    task.wait(0.05)
                    VIM:SendMouseButtonEvent(data.x, data.y, 0, false, game, 1)
                end
            end
            task.wait(0.5) -- Pausa antes de reiniciar el ciclo
        end
    end)
end)

MacroTab:CreateButton("LIMPIAR MEMORIA üóëÔ∏è", function()
    history = {}
    Library:Notify("SISTEMA", "Datos borrados")
end)
