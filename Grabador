local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/luis32405516-cmyk/PREMIUM/refs/heads/main/Yy"))()
local Window = Library:CreateWindow()

local LP = game:GetService("Players").LocalPlayer
local RS = game:GetService("RunService")
local VIM = game:GetService("VirtualInputManager")
local UIS = game:GetService("UserInputService")

local history = {}
local isRecording = false
local isPlaying = false

local MacroTab = Window:CreateTab("ü§ñ GRABADOR")

MacroTab:CreateSwitch("GRABAR TODO üî¥", function(s)
    isRecording = s
    if s then
        history = {}
        local startTime = tick()
        
        -- Hilo de alta frecuencia para posici√≥n (Captura Teleports)
        task.spawn(function()
            while isRecording do
                if LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") then
                    table.insert(history, {
                        type = "move",
                        cf = LP.Character.HumanoidRootPart.CFrame,
                        t = tick() - startTime
                    })
                end
                task.wait(0.03) -- M√°s r√°pido para no perder detalle
            end
        end)

        -- Captura de Clics (Incluso los que tocan la GUI)
        local clickCon
        clickCon = UIS.InputBegan:Connect(function(input)
            if isRecording and (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
                table.insert(history, {
                    type = "click",
                    x = input.Position.X,
                    y = input.Position.Y,
                    t = tick() - startTime
                })
            end
            if not isRecording then clickCon:Disconnect() end
        end)
    end
end)

MacroTab:CreateSwitch("REPETIR GRABACI√ìN üîÅ", function(s)
    isPlaying = s
    task.spawn(function()
        while isPlaying do
            local startPlayTime = tick()
            for _, data in ipairs(history) do
                if not isPlaying then break end
                
                -- Espera al tiempo exacto del frame grabado
                while (tick() - startPlayTime) < data.t do 
                    RS.Heartbeat:Wait() 
                end
                
                if data.type == "move" and LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") then
                    LP.Character.HumanoidRootPart.CFrame = data.cf
                elseif data.type == "click" then
                    VIM:SendMouseButtonEvent(data.x, data.y, 0, true, game, 1)
                    task.wait(0.01)
                    VIM:SendMouseButtonEvent(data.x, data.y, 0, false, game, 1)
                end
            end
            task.wait(0.1)
        end
    end)
end)

MacroTab:CreateButton("BORRAR MEMORIA üóëÔ∏è", function()
    history = {}
    Library:Notify("SISTEMA", "Datos eliminados")
end)
